{% extends 'base.html' %}
{% block title %}Offers{% endblock %}
{% block content %}
<h1>Offers</h1>
<form method="get" action="{{ url_for('offers') }}" style="margin-bottom: 1rem;">
  <label>Status:
    <select name="status">
      <option value="">All</option>
      <option value="open" {% if request.args.get('status')=='open' %}selected{% endif %}>Open</option>
      <option value="closed" {% if request.args.get('status')=='closed' %}selected{% endif %}>Closed</option>
    </select>
  </label>
  <button type="submit">Filter</button>
</form>

<h2>List</h2>
<ul>
  {% for o in offers %}
    {% set side = (o.__side or 'sell')|lower %}
    <li>
      {% if side == 'sell' %}
        <span style="display:inline-block;padding:2px 8px;border-radius:12px;background:#ffecb3;color:#8a6d3b;font-weight:600;">SELL XMR</span>
      {% else %}
        <span style="display:inline-block;padding:2px 8px;border-radius:12px;background:#c8e6c9;color:#256029;font-weight:600;">BUY XMR</span>
      {% endif %}
      <a href="{{ url_for('offer_detail', offer_id=o.id) }}" style="margin-left:6px;">{{ o.title }}</a>
      — {{ o.price }} XMR — {{ o.status }} — owner: {{ o.seller_name or 'unknown' }}
    </li>
  {% else %}
    <li>No offers found.</li>
  {% endfor %}
</ul>
{% endblock %}
